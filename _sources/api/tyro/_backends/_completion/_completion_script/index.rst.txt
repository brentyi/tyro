:orphan:

:py:mod:`tyro._backends._completion._completion_script`
=======================================================

.. py:module:: tyro._backends._completion._completion_script

.. autoapi-nested-parse::

   Standalone completion script for tyro.

   This module contains the completion logic that gets embedded in bash/zsh scripts.
   It uses only Python stdlib and is compatible with Python 3.8+.

   This file is designed to be:
   1. Type-checked by pyright
   2. Unit tested directly
   3. Embedded as a string in generated completion scripts



Module Contents
---------------

.. py:function:: reconstruct_colon_words(words: List[str], current_word_index: int, spec: Dict[str, Any]) -> Tuple[List[str], int]

   Reconstruct words that were split by bash on colons.

   Bash treats ':' as a word separator by default, so typing "dataset:mnist"
   results in words like ["dataset", ":", "mnist"]. This function detects
   such patterns and merges them back together, but only when the merged
   result matches a known subcommand (or is a prefix of one).

   :param words: List of words from the command line (without program name).
   :param current_word_index: Index of the word being completed (0-based).
   :param spec: Completion specification dictionary.

   :returns: Tuple of (reconstructed_words, new_current_word_index).


.. py:function:: get_completions(words: List[str], current_word_index: int, spec: Dict[str, Any]) -> List[str]

   Get completions for the current position.

   :param words: List of words on the command line (including the program name).
   :param current_word_index: Index of the word being completed (0-based).
   :param spec: Completion specification dictionary.

   :returns: List of completion strings in "completion       description" format.


.. py:function:: main() -> None

   Main entrypoint when run as a script.

   Expects command line arguments in the format:
   <word1> <word2> ... <wordN> <current_index>

   The COMPLETION_SPEC variable should be defined before calling this.


